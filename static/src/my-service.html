<link rel="import" href="../bower_components/google-apis/google-apis.html"> 

<dom-module id="my-service">
  <template> 
            <google-client-loader
                id="service"
                name="documents"
                version="v1"
                app-id="webdev-play"
                on-google-api-load="_apiLoaded"
                google-api-load-error = "_apiLoadedError" ></google-client-loader>
  </template>

  <script>
    Polymer({
      is: 'my-service', 

      loadDocuments: function() {
        var request = this.$.service.api.documents.list()
        request.execute(function (resp) {
            this.documents = resp;
            console.info("this.documents ", this.documents );  
            this.fire("on-documents-loaded");
        }.bind(this));
      },

      _apiLoaded: function(e) {
        this.loadDocuments();
      },

      _apiLoadedError: function(e) {
        console.info("_apiLoadedError", "cannot load");  
      }
    });
  </script>
  
</dom-module>
